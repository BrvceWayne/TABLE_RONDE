<%#
  MENU BURGER FLOTTANT - Ultra minimaliste

  Juste un bouton burger flottant en haut √† droite
  Pas de header visible, se fond dans le d√©cor
%>

<div data-controller="menu" data-action="keydown.escape@window->menu#closeOnEscape">
  <%# Bouton burger flottant %>
  <button
    class="burger-floating"
    data-menu-target="burger"
    data-action="click->menu#toggle"
    aria-label="Menu"
    aria-expanded="false"
  >
    <span class="burger__line"></span>
    <span class="burger__line"></span>
    <span class="burger__line"></span>
  </button>

  <%# Overlay %>
  <div
    class="menu-overlay"
    data-menu-target="overlay"
    data-action="click->menu#closeOnOverlay"
  ></div>

  <%# Menu plein √©cran %>
  <nav class="menu-fullscreen" data-menu-target="menu">
    <%# Logo en haut du menu %>
    <div class="menu-fullscreen__header">
      <%= link_to root_path, class: "menu-fullscreen__logo", data: { action: "click->menu#close" } do %>
        <span class="logo-text">
          TableR<span class="logo-icon">
            <span class="logo-icon__fork"></span>
            <span class="logo-icon__circle"></span>
            <span class="logo-icon__knife"></span>
          </span>nde
        </span>
      <% end %>
    </div>

    <div class="menu-fullscreen__content">
      <ul class="menu-fullscreen__nav">
        <li>
          <%= link_to root_path, class: "menu-fullscreen__link", data: { action: "click->menu#close" } do %>
            <span class="menu-fullscreen__icon">üè†</span>
            Accueil
          <% end %>
        </li>
        <% if user_signed_in? %>
          <li>
            <%= link_to sessions_path, class: "menu-fullscreen__link", data: { action: "click->menu#close" } do %>
              <span class="menu-fullscreen__icon">üìÖ</span>
              Mes sessions
            <% end %>
          </li>
          <li>
            <%= link_to "#", class: "menu-fullscreen__link", data: { action: "click->menu#close" } do %>
              <span class="menu-fullscreen__icon">üë§</span>
              Mon profil
            <% end %>
          </li>
        <% end %>
      </ul>

      <div class="menu-fullscreen__actions">
        <% if user_signed_in? %>
          <div class="menu-fullscreen__user">
            <span class="avatar">
              <%= current_user.email.first.upcase %>
            </span>
            <span class="menu-fullscreen__email"><%= current_user.email %></span>
          </div>
          <%= link_to destroy_user_session_path,
                      data: { turbo_method: :delete, action: "click->menu#close" },
                      class: "btn btn-outline btn-block" do %>
            Se d√©connecter
          <% end %>
        <% else %>
          <%= link_to "Se connecter", new_user_session_path,
                      class: "btn btn-outline btn-block",
                      data: { action: "click->menu#close" } %>
          <%= link_to "S'inscrire", new_user_registration_path,
                      class: "btn btn-primary btn-block",
                      data: { action: "click->menu#close" } %>
        <% end %>
      </div>
    </div>

    <div class="menu-fullscreen__footer">
      <span class="tagline">On mange o√π ?</span>
    </div>
  </nav>
</div>
