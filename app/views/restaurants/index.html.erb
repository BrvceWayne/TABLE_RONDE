<h1>Recommandations</h1>
<p class="text-muted">Session : <%= @session.share_code %></p>

<% @restaurants.each do |restaurant| %>
  <div class="card mb-3 <%= 'border-primary' if restaurant.rank == 1 %>">
    <div class="card-header d-flex justify-content-between align-items-center">
      <span>
        <% if restaurant.rank == 1 %>
          <strong>Notre meilleur choix</strong>
        <% else %>
          Alternative #<%= restaurant.rank %>
        <% end %>
      </span>
      <span class="badge bg-secondary">#<%= restaurant.rank %></span>
    </div>
    <div class="card-body">
      <h5 class="card-title"><%= restaurant.name %></h5>
      <p class="card-text text-muted"><%= restaurant.address %></p>
      <p class="card-text"><em><%= restaurant.ai_explanation %></em></p>

      <% if restaurant.phone.present? %>
        <p><strong>Tél :</strong> <%= restaurant.phone %></p>
      <% end %>

      <%= link_to "Voir les détails", session_restaurant_path(session_share_code: @session.share_code, id: restaurant.id), class: "btn btn-outline-primary btn-sm" %>
    </div>
  </div>
<% end %>

<div class="d-flex gap-2 mt-4">
  <%= link_to "Retour au dashboard", dashboard_session_path(share_code: @session.share_code), class: "btn btn-outline-secondary" %>
  <%= button_to "Nouvelles recommandations", regenerate_session_restaurants_path(session_share_code: @session.share_code), method: :post, class: "btn btn-warning" %>
</div>
